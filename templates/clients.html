{{ define "content" }}
<section class="clients-management">
    <div class="container">
        <h1 class="text-center mb-4">Gestión de Clientes</h1>
        
        <!-- Buscador de clientes -->
        <div class="row mb-4">
            <div class="col-md-8 offset-md-2">
                <form class="d-flex" id="search-form">
                    <input class="form-control me-2" type="search" id="search-input" placeholder="Buscar cliente por nombre o ID" aria-label="Buscar">
                    <select class="form-select me-2" id="search-type">
                        <option value="name">Nombre</option>
                        <option value="id">ID</option>
                    </select>
                    <button class="btn btn-outline-primary" type="submit">Buscar</button>
                </form>
            </div>
        </div>

        <!-- Tabla de clientes -->
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Email</th>
                        <th>Teléfono</th>
                        <th>Tiempo como Cliente</th>
                        <th>Tours Reservados</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {{ if .clients }}
                        {{ range .clients }}
                        <tr>
                            <td>{{ .ID }}</td>
                            <td>{{ .Name }}</td>
                            <td>{{ .Email }}</td>
                            <td>{{ .Phone }}</td>
                            <td>{{ .TimeSinceJoining }}</td>
                            <td>{{ .BookedTours }}</td>
                            <td>
                                <a href="/clients/{{ .ID }}" class="btn btn-sm btn-info" title="Ver detalles"><i class="fas fa-eye"></i></a>
                                <a href="/clients/edit/{{ .ID }}" class="btn btn-sm btn-warning" title="Editar"><i class="fas fa-edit"></i></a>
                                <button class="btn btn-sm btn-danger delete-client" data-id="{{ .ID }}" title="Eliminar"><i class="fas fa-trash"></i></button>
                            </td>
                        </tr>
                        {{ end }}
                    {{ else }}
                        <tr>
                            <td colspan="7" class="text-center">No se encontraron clientes.</td>
                        </tr>
                    {{ end }}
                </tbody>
            </table>
        </div>

        <!-- Paginación -->
        {{ if gt .totalPages 1 }}
        <nav aria-label="Navegación de páginas">
            <ul class="pagination justify-content-center">
                <li class="page-item {{ if eq .currentPage 1 }}disabled{{ end }}">
                    <a class="page-link" href="?page={{ sub .currentPage 1 }}" tabindex="-1">Anterior</a>
                </li>
                {{ range $i := .pages }}
                <li class="page-item {{ if eq $i $.currentPage }}active{{ end }}">
                    <a class="page-link" href="?page={{ $i }}">{{ $i }}</a>
                </li>
                {{ end }}
                <li class="page-item {{ if eq .currentPage .totalPages }}disabled{{ end }}">
                    <a class="page-link" href="?page={{ add .currentPage 1 }}">Siguiente</a>
                </li>
            </ul>
        </nav>
        {{ end }}

        <!-- Botón para agregar nuevo cliente -->
        <div class="text-center mt-4">
            <a href="/clients/new" class="btn btn-primary">Agregar Nuevo Cliente</a>
        </div>
    </div>
</section>

<!-- Modal para mostrar el historial de tours -->
<div class="modal fade" id="tourHistoryModal" tabindex="-1" aria-labelledby="tourHistoryModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="tourHistoryModalLabel">Historial de Tours</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="tourHistoryContent">
                <!-- El contenido se llenará dinámicamente -->
            </div>
        </div>
    </div>
</div>

<script>
    // ... (el script se mantiene igual)
</script>
{{ end }}
